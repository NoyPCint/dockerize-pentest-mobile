#!/bin/bash
# TODO: add an option to add levels of URL extracting

# Check if variables provided
if [ "$#" -eq 0 ]; then
  echo "URLs extracter for reports"
  echo "Usage: $0 PATH_TO_FILE [OUTPUT_FILE]" >&2
    exit 1
fi


INPUT_FILE=$1

# Check if file exists
if  [ ! -f "$INPUT_FILE" ]; then
        echo "File $1 not found" >&2
        exit 1
fi

if [ "$1" != "" ]; then
    echo "Extracting URLs from file $1"
    # extract files
    OUTPUT=$(cat $INPUT_FILE | cut -d '/' -f1-5 | sort | uniq)
    if [ "$2" != "" ]; then
            PATH_TO_OUTPUT_FILE=$2
            echo "$OUTPUT" > $PATH_TO_OUTPUT_FILE
            echo "Extracted URLs to $PATH_TO_OUTPUT_FILE"
     else
            echo -e "Extracted URLs:"
            echo "$OUTPUT"
    fi
fi