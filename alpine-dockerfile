FROM python:alpine

# Environment Variables
ENV HOME /root

# Working Directory
WORKDIR /root
RUN mkdir ${HOME}/wordlists

# Copy apks file in current directory
COPY *.apk ${HOME}/apks/

# Copy scripts files to scripts directory
COPY *.sh ${HOME}/scripts/

# Copy scripts files to scripts directory
COPY *.jar ${HOME}/scripts/

# Install Essentials
RUN apk add --repository http://dl-3.alpinelinux.org/alpine/edge/testing/ android-tools && \
    apk add wget \
    curl \
    python3 \ 
    net-tools \
    git 

RUN echo "alias python=python3" >> /root/.bashrc
RUN echo "alias test=whoami" >> /root/.bashrc

RUN whoami

# # Install Dependencies
# RUN apt-get update && \
#     apt-get install -y --no-install-recommends \
#     python3.7 \
#     && rm -rf /var/lib/apt/lists/*

#     openjdk8-jre \
#     android-tools \ 
# configure python(s)
# RUN python -m pip install --upgrade setuptools && python3 -m pip install --upgrade setuptools && python3.7 -m pip install --upgrade setuptools

RUN python -v 

# Compile abe.jar
RUN cd ${HOME}/ && \
	git clone https://github.com/nelenkov/android-backup-extractor.git

# RUN cd android-backup-extractor && \
# 	./gradlew 

# COPY build/libs/abe-all.jar ${HOME}/abe.jar
# RUN echo 'alias abe="java -jar ${HOME}/abe.jar"' >> ${HOME}/.bashrc

# seclists
#RUN cd ${HOME}/wordlists && 
#    git clone --depth 1 https://github.com/danielmiessler/SecLists.git 

# Decompile apps
# RUN apktool d "${HOME}/apks/*.apk" 

# scan apk in MobSF

# Run app in ADB

# Burpsuite URL exporter

# Run grep interesting strings script