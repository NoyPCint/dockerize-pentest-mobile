FROM ubuntu:18.04

# Environment Variables
ENV HOME /root
ENV TOOLS ${HOME}/tools
ENV WORDLISTS ${HOME}/wordlists

# Working Directory
WORKDIR ${HOME}

# Copy apks file in current directory
COPY *.apk ${HOME}/apps/

# Copy scripts files to scripts directory
# COPY *.sh ${HOME}/tools/
COPY /tools ${TOOLS}

COPY /wordlists ${WORDLISTS}

# Install Essentials
RUN apt-get update && \
	apt-get install -y --no-install-recommends \
    adb  \
    vim
#     wget \
#     curl \
#     git 
#     apktool \
#     net-tools \
#     openjdk-8-jdk  \
#     python \ 
#     python-pip \ 
#     python3 \
#     python3-pip \

# RUN apktool d ${apps}/*.apk -o ${apps}/decompiled/

# Install Dependencies
# RUN apt-get update && \
#     apt-get install -y --no-install-recommends \
#     python3.7 
#     && rm -rf /var/lib/apt/lists/*

# configure python(s)
# RUN python -m pip install --upgrade setuptools && python3 -m pip install --upgrade setuptools && python3.7 -m pip install --upgrade setuptools

# Setup JAVA_HOME -- for compling abe jar
# ENV JAVA_HOME /usr/lib/jvm/java-8-openjdk-amd64/
# RUN export JAVA_HOME

# Compile abe.jar
# RUN git clone https://github.com/nelenkov/android-backup-extractor.git ${TOOLS}/android-backup-extractor && \
# 	  ${TOOLS}/android-backup-extractor/gradlew 

# RUN git clone https://github.com/m9rco/Genymotion_ARM_Translation ${HOME}/tools/genymotion-ARM-translation


# COPY build/libs/abe-all.jar ${HOME}/abe.jar
# RUN echo 'alias abe="java -jar ${HOME}/abe.jar"' >> ${HOME}/.bashrc

# seclists
#RUN git clone --depth 1 https://github.com/danielmiessler/SecLists.git 

# Decompile apps
# RUN apktool d ${HOME}/apks/*.apk 

# scan apk in MobSF

# Run app in ADB

# Burpsuite URL exporter

# Run grep interesting strings script

